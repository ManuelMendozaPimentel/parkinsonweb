<div class="patients-container">
  <div class="header">
    <h1>Pacientes</h1>
    <app-button variant="primary" (clickEvent)="openRegisterForm()">
      Registrar paciente
    </app-button>
  </div>

  <table class="patients-table">
    <thead>
      <tr>
        <th>Fecha creación</th>
        <th>Nombre</th>
        <th>Diagnóstico</th>
        <th>Correo</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody>
      @for (patient of patients; track patient.id) {
        <tr>
          <td>{{ patient.fechaCreacion }}</td>
          <td>{{ patient.nombre }}</td>
          <td>{{ patient.diagnostico }}</td>
          <td>{{ patient.correo }}</td>
          <td class="actions">
            <!-- Usamos variant="link" porque "secondary" no existe -->
            <app-button variant="link" (clickEvent)="openEditForm(patient)">Actualizar</app-button>
            <button class="btn-delete" (click)="onDelete(patient)">Eliminar</button>
          </td>
        </tr>
      }
    </tbody>
  </table>

  @if (showForm) {
    <app-modal-overlay (close)="onCloseForm()">
      <app-patient-form
        [patient]="editingPatient"
        (save)="onSavePatient($event)"
        (cancel)="onCloseForm()"
      ></app-patient-form>
    </app-modal-overlay>
  }
</div>